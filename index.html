<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="./ScrollMagic.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>

    <script src="./ScrollToPlugin.min.js"></script>


    <script src="./animation.gsap"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.scrollto@2.1.2/jquery.scrollTo.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/plugins/CSSPlugin.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/easing/EasePack.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenLite.min.js"></script>

    <script src="./noframework.waypoints.min.js"></script>
    <script src="http://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <script src="http://d3js.org/topojson.v3.min.js"></script>
  </head>
  <body>

    <style>

    /* http://meyerweb.com/eric/tools/css/reset/
   v2.0 | 20110126
   License: none (public domain)
*/

      html, body, div, span, applet, object, iframe,
      h1, h2, h3, h4, h5, h6, p, blockquote, pre,
      a, abbr, acronym, address, big, cite, code,
      del, dfn, em, img, ins, kbd, q, s, samp,
      small, strike, strong, sub, sup, tt, var,
      b, u, i, center,
      dl, dt, dd, ol, ul, li,
      fieldset, form, label, legend,
      table, caption, tbody, tfoot, thead, tr, th, td,
      article, aside, canvas, details, embed,
      figure, figcaption, footer, header, hgroup,
      menu, nav, output, ruby, section, summary,
      time, mark, audio, video {
      	margin: 0;
      	padding: 0;
      	border: 0;
      	font-size: 100%;
      	font: inherit;
      	vertical-align: baseline;
      }
      /* HTML5 display-role reset for older browsers */
      article, aside, details, figcaption, figure,
      footer, header, hgroup, menu, nav, section {
      	display: block;
      }
      body {
      	line-height: 1;
      }
      ol, ul {
      	list-style: none;
      }
      blockquote, q {
      	quotes: none;
      }
      blockquote:before, blockquote:after,
      q:before, q:after {
      	content: '';
      	content: none;
      }
      table {
      	border-collapse: collapse;
      	border-spacing: 0;
      }

      .intro {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 85vh;
        width: 100%;
        background-color: #1E4675;
      }

      #intro-phrase {
        font-family: Helvetica;
        font-size: 50px;
        color: white;
      }


      .box2 {
        height: 400px;
        width: 100%;
      }
      /* THIS MAKES THE SPACING JITTERY BETWEEN first and second */
      /* .scrollmagic-pin-spacer {
        padding: 0px !important;
      } */

      .pin-container {
        display: flex;
        flex-direction: row;
      }
      #infoModal{
         position: absolute;
         z-index: 2;
         background: rgba(0,153,76,0.8);
         width:140px;
         height:20px;
         color:black;
         font-size: 14px;
         padding:5px;
         top:-150px;
         left:-150px;
         font-family: "HelveticaNeue-Light", "Helvetica Neue Light",
          "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
      }

      #header {
        display: flex;
        flex-direction: row;
        background-color: black;
        top:0;
        height: 15vh;
        width: 100%;

        /* transition:all 0.5s; */
        /* position: relative; */
        z-index: 1;
      }
      #logo {
        height: 100%;
        width: 20%;
        background-color: red;
      }

      #nav {
        height: 100%;
        width: 80%;
        display: flex;
        flex-direction: row;
        justify-content: space-around;
        align-items: center;
      }

      .link {
        width: 30%;
        height: 60%;
        background-color: white;
      }


      /* .header-fixed {
        position: fixed;
        box-shadow:0 5px 0 rgba(0,0,0,0.1);
      } */
      #map{
        width: 60%;
        height: 85vh;
      }
      #pin2 {
        width: 40%;
        /* height: 5000px; */

      }

      .section {
        display: flex;
        align-items: center;
        justify-content: space-around;
        flex-direction: column;
      }

      .section-title {
        height: 40%;
        display: flex;
        align-items: center;
        justify-content: center
      }

      .section-explanation {
        height: 60%;
        display: flex;
        align-items: center;
      }


      .first {

        height: 100vh;
        background-color: orange;
      }

      .second {
        height: 100vh;
        background-color: red;
      }

      .third {
        height: 100vh;
        background-color: orange;
      }
      .fourth {
        height: 100vh;
        background-color: #f75413;
      }
      .fifth {
        height: 100vh;
        background-color: red;
      }
      .sixth {
        height: 100vh;
        background-color: green;
      }
      .seventh {
        height: 100vh;
        background-color: orange;
      }
      .eighth {
        height: 100vh;
        background-color: purple;
      }
      .ninth {
        height: 100vh;
        background-color: orange;
      }
      .tenth {
        height: 100vh;
        background-color: purple;
      }
      .eleventh {
        height: 100vh;
        background-color: orange;
      }
      .twelfth {
        height: 100vh;
        background-color: red;
      }

      /* disable scroll bar but only for chrome */
      ::-webkit-scrollbar {
          display: none;
      }


    </style>

    <div class="scrollContent">
				<section id="titlechart">
          <div class="intro">
            <p id="intro-phrase">Welcome to Europe</p>
					</div>
          <div id="trigger-header"></div>
          <div id="header">
            <div id="logo">

            </div>
            <div id="nav">
              <button id="first-link" data-position='enter-section-1' class="link">

              </button>
              <button id="second-link" data-position='enter-section-2' class="link">

              </button>
              <button id="third-link" data-position='enter-section-3' class="link">

              </button>
            </div>
          </div>

          <!-- <div id="header"></div> -->
					<script>
						// init controller
						var controller = new ScrollMagic.Controller();
					</script>

				</section>
				<section class="demo">
					<div class="spacer s2"></div>

          <div class="trigger-container">

            <div id="trigger-map"></div>
            <div id="trigger-explanation"></div>
            <div id="trigger-first-section"></div>
          </div>
          <div id="infoModal"></div>
          <div class="pin-container">

  					<div id="map"></div>

  					<div id="pin2">
              <div id="enter-section-1"></div>
              <div class="first section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-1"></div>
              <div id="enter-section-2"></div>
              <div id="pin3" class="second section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-2"></div>
              <div id="enter-section-3"></div>
              <div id='pin4' class="third section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-3"></div>
              <div id="enter-section-4"></div>
              <div id='pin5' class="fourth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-4"></div>
              <div id="enter-section-5"></div>
              <div id='pin6' class="fifth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-5"></div>
              <div id="enter-section-6"></div>
              <div id='pin7' class="sixth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-6"></div>
              <div id="enter-section-7"></div>
              <div id='pin8' class="seventh section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-7"></div>
              <div id="enter-section-8"></div>
              <div id='pin9' class="eighth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-8"></div>
              <div id="enter-section-9"></div>
              <div id='pin10' class="ninth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-9"></div>
              <div id="enter-section-10"></div>
              <div id='pin11' class="tenth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-10"></div>
              <div id="enter-section-11"></div>
              <div id='pin12' class="eleventh section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-11"></div>
              <div id="enter-section-12"></div>
              <div id='pin13' class="twelfth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-12"></div>
              <div id="enter-section-13"></div>
              <div id='pin14' class="thirteen section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-13"></div>
              <div id="enter-section-14"></div>
              <div id='pin15' class="fourteenth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-14"></div>
              <div id="enter-section-15"></div>
              <div id='pin16' class="fifteenth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-15"></div>
              <div id="enter-section-16"></div>
              <div id='pin17' class="sixteen section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-16"></div>
              <div id="enter-section-17"></div>
              <div id='pin18' class="seventeenth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-17"></div>
              <div id="enter-section-18"></div>
              <div id='pin19' class="eigteenth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-18"></div>
              <div id="enter-section-19"></div>
              <div id='pin20' class="ninteenth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-19"></div>
              <div id="enter-section-20"></div>
              <div id='pin21' class="twentieth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-20"></div>
              <div id="enter-section-21"></div>
              <div id='pin22' class="twentyfirst section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-21"></div>
              <div id="enter-section-22"></div>
              <div id='pin23' class="twentysecond section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-22"></div>
              <div id="enter-section-23"></div>
              <div id='pin24' class="twentythird section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-23"></div>
              <div id="enter-section-24"></div>
              <div id='pin25' class="twentyfourth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-24"></div>
              <div id="enter-section-25"></div>
              <div id='pin26' class="twentyfifth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-25"></div>
              <div id="enter-section-26"></div>
              <div id='pin27' class="twentysixth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-26"></div>
              <div id="enter-section-27"></div>
              <div id='pin28' class="twentyseventh section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-27"></div>
              <div id="enter-section-28"></div>
              <div id='pin29' class="twentyeighth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-28"></div>
              <div id="enter-section-29"></div>
              <div id='pin30' class="twentyninth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-29"></div>
              <div id="enter-section-30"></div>
              <div id='pin31' class="thirtieth section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-30"></div>
              <div id="enter-section-31"></div>
              <div id='pin32' class="thirtyfirst section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-31"></div>
              <div id="enter-section-32"></div>
              <div id='pin33' class="thirtysecond section">
                <div class="section-title">
                  <p>section title</p>
                </div>
                <div class="section-explanation">
                  <p>section explanation</p>
                </div>
              </div>
              <div id="reverse-enter-section-32"></div>
  					</div>
          </div>
					<div class="spacer s2"></div>
					<script>
            //   require('./animation.gsap');
            //   var gsap = require("gsap");

						$(function () { // wait for document ready
							// build scene


              // build tween
            	var tween = TweenMax.from("#animate", 0.5, {autoAlpha: 0, scale: 0.7});

            	// var sceneNav = new ScrollMagic.Scene({triggerElement: "#pin3", duration: 200, triggerHook: "onLeave"})
            	// 				.setTween(tween)
            	// 				// .addIndicators() // add indicators (requires plugin)
            	// 				.addTo(controller);


            	controller.scrollTo(function (newpos) {
            		TweenMax.to(window, .8, {scrollTo: {y: newpos}});
            	});

            	//  bind scroll to anchor links
              const buttons = document.querySelectorAll('.link')
              for (var i = 0; i < buttons.length; i++) {
                buttons[i].addEventListener("click", function (e) {

              		var pos = $(this).attr("data-position");

              		if ($(pos).length > 0) {
              			e.preventDefault();
                  }
              			// trigger scroll
              			controller.scrollTo(`#${pos}`);

                }
              	)
              }


							var headerScene = new ScrollMagic.Scene({triggerElement: "#trigger-header",triggerHook: 0})
											.setPin("#header")
											// .addIndicators({name: "1 (duration: 300)"}) // add indicators (requires plugin)
											.addTo(controller);

							var scene1 = new ScrollMagic.Scene({triggerElement: "#trigger-map",triggerHook: 0, duration: 300000})
											.setPin("#map")
                      .offset(-100)
											// .addIndicators({name: "1 (duration: 300)"}) // add indicators (requires plugin)
											.addTo(controller);

							var scene2 = new ScrollMagic.Scene({triggerElement: "#trigger-first-section",triggerHook: 0, duration: 1000})
											.setPin("#pin2")
                      // .offset(-100)
											// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);

							var scene3 = new ScrollMagic.Scene({triggerElement: "#enter-section-2",triggerHook: 0, duration: 1000})
											.setPin("#pin3")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);

							var scene4 = new ScrollMagic.Scene({triggerElement: "#enter-section-3",triggerHook: 0, duration: 1000})
											.setPin("#pin4")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene5 = new ScrollMagic.Scene({triggerElement: "#enter-section-4",triggerHook: 0, duration: 1000})
											.setPin("#pin5")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene6 = new ScrollMagic.Scene({triggerElement: "#enter-section-5",triggerHook: 0, duration: 1000})
											.setPin("#pin6")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene7 = new ScrollMagic.Scene({triggerElement: "#enter-section-6",triggerHook: 0, duration: 1000})
											.setPin("#pin7")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene8 = new ScrollMagic.Scene({triggerElement: "#enter-section-7",triggerHook: 0, duration: 1000})
											.setPin("#pin8")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene9 = new ScrollMagic.Scene({triggerElement: "#enter-section-8",triggerHook: 0, duration: 1000})
											.setPin("#pin9")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene10 = new ScrollMagic.Scene({triggerElement: "#enter-section-9",triggerHook: 0, duration: 1000})
											.setPin("#pin10")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene11 = new ScrollMagic.Scene({triggerElement: "#enter-section-10",triggerHook: 0, duration: 1000})
											.setPin("#pin11")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene12 = new ScrollMagic.Scene({triggerElement: "#enter-section-11",triggerHook: 0, duration: 1000})
											.setPin("#pin12")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene13 = new ScrollMagic.Scene({triggerElement: "#enter-section-12",triggerHook: 0, duration: 1000})
											.setPin("#pin13")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene14 = new ScrollMagic.Scene({triggerElement: "#enter-section-13",triggerHook: 0, duration: 1000})
											.setPin("#pin14")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene15 = new ScrollMagic.Scene({triggerElement: "#enter-section-14",triggerHook: 0, duration: 1000})
											.setPin("#pin15")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene16 = new ScrollMagic.Scene({triggerElement: "#enter-section-15",triggerHook: 0, duration: 1000})
											.setPin("#pin16")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene17 = new ScrollMagic.Scene({triggerElement: "#enter-section-16",triggerHook: 0, duration: 1000})
											.setPin("#pin17")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene18 = new ScrollMagic.Scene({triggerElement: "#enter-section-17",triggerHook: 0, duration: 1000})
											.setPin("#pin18")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene19 = new ScrollMagic.Scene({triggerElement: "#enter-section-18",triggerHook: 0, duration: 1000})
											.setPin("#pin19")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene20 = new ScrollMagic.Scene({triggerElement: "#enter-section-19",triggerHook: 0, duration: 1000})
											.setPin("#pin20")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene21 = new ScrollMagic.Scene({triggerElement: "#enter-section-20",triggerHook: 0, duration: 1000})
											.setPin("#pin21")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene22 = new ScrollMagic.Scene({triggerElement: "#enter-section-21",triggerHook: 0, duration: 1000})
											.setPin("#pin22")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene23 = new ScrollMagic.Scene({triggerElement: "#enter-section-22",triggerHook: 0, duration: 1000})
											.setPin("#pin23")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene24 = new ScrollMagic.Scene({triggerElement: "#enter-section-23",triggerHook: 0, duration: 1000})
											.setPin("#pin24")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene25 = new ScrollMagic.Scene({triggerElement: "#enter-section-24",triggerHook: 0, duration: 1000})
											.setPin("#pin25")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene26 = new ScrollMagic.Scene({triggerElement: "#enter-section-25",triggerHook: 0, duration: 1000})
											.setPin("#pin26")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene27 = new ScrollMagic.Scene({triggerElement: "#enter-section-26",triggerHook: 0, duration: 1000})
											.setPin("#pin27")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene28 = new ScrollMagic.Scene({triggerElement: "#enter-section-27",triggerHook: 0, duration: 1000})
											.setPin("#pin28")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene29 = new ScrollMagic.Scene({triggerElement: "#enter-section-28",triggerHook: 0, duration: 1000})
											.setPin("#pin29")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene30 = new ScrollMagic.Scene({triggerElement: "#enter-section-29",triggerHook: 0, duration: 1000})
											.setPin("#pin30")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene31 = new ScrollMagic.Scene({triggerElement: "#enter-section-30",triggerHook: 0, duration: 1000})
											.setPin("#pin31")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene32 = new ScrollMagic.Scene({triggerElement: "#enter-section-31",triggerHook: 0, duration: 1000})
											.setPin("#pin32")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene33 = new ScrollMagic.Scene({triggerElement: "#enter-section-32",triggerHook: 0, duration: 1000})
											.setPin("#pin33")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);
							var scene34 = new ScrollMagic.Scene({triggerElement: "#enter-section-33",triggerHook: 0, duration: 1000})
											.setPin("#pin34")
											// .offset(-100)// .addIndicators({name: "2 (duration: 500)"}) // add indicators (requires plugin)
											.addTo(controller);

						});
					</script>
				</section>


			</div>
      <script>


      const height = 900;
      const width = 1200;

      const projection = d3.geoOrthographic()
                        .center([ 20, 28 ])
                        .translate([ width/2, height/2 ])
                        .scale([ width/1.2 ])
                        .rotate([-10, -20, -10 ]);


      let europe = void 0;

      const path = d3.geoPath().projection(projection);

      const svg = d3.select('#map')
                    .append('svg')
                    .attr('height', height)
                    .attr('width', width)

            //this creates the background
            // by appending it before the 'g' map is rendered, it places it in the background
            svg.append("rect")
                  .attr("width", "100%")
                  .attr("height", "100%")
                  .attr("fill", "#1E4675");


      const membership = {};

      d3.csv("EuropeanStates.csv", function(data) {

        for (var i = 0; i < data.length; i++) {
          membership[data[i].State] = data[i]
        }
          console.log(membership);
      });

      const generalColorScheme = {
        'EU': {
          'EU': '#f75413',
          'Candidate': 'red'
        },
        'Currency': {
          '€': '#f75413',
          'DKK': 'orange',
          'SEK': 'orange',
          'GBP': 'orange',
        },
        'Euro-relation': {
          'yes': '#f75413',
          'obligated':'#FBB135',
          'exempt': 'orange'
        },
        'NATO': {
          'NATO': '#f75413'
        },
        'CurrencyUnion': {
          'EUCU': '#f75413'
        },
        'Schengen': {
          'Schengen': '#f75413',
          'visa-free': 'red'
        },
        'EEA': {
          'EEA': '#f75413'
        }

      }


      const colorify = (data, cat) => {


        let stateName = data.properties.admin
        if (!membership[stateName]) { return 'gray' }

        let status = membership[stateName][`${cat}`]
        if (!generalColorScheme[`${cat}`][`${status}`]) { return 'gray' }
        return generalColorScheme[`${cat}`][`${status}`]

      }


      const handleTransition = (cate) => {
        let dur = 400;
        if(cate === 'income') {
          handleIncome(dur)
          return
        }
        makeMapTransparent(dur)
        handleMapColorUpdate(cate)
        makeMapOpaque(dur)
      }

      const makeMapTransparent = (duration) => {
        d3.selectAll('path')
              .transition().duration(`${duration}`)
              .style('fill-opacity', 0.1)
      }

      const makeMapOpaque = (duration) => {
        setTimeout(() => d3.selectAll('path')
                .transition().duration(`${duration}`)
                .style('fill-opacity', 0.9), `${duration}`)
      }

      const handleMapColorUpdate = (category) => {

        d3.selectAll('path')
            .attr('fill', (d) => colorify(d, category))
      }

      const adjustIncome = (realIncome) => {

        if (realIncome > 50000) { realIncome = 50000 }
        return realIncome
      }

      const handleIncome = (duration) => {

        const colorbyIncome = d3.scaleLinear().domain([100, 50000]).range(['#FBB135', 'red']);
        makeMapTransparent(duration)
        d3.selectAll('path')
            .attr('fill', (d) => {
              let stateName = d.properties.admin
              if (!membership[stateName]) { return '#FBB135' }
              let status = membership[stateName]['GNI']
              // console.log(parseInt(status.split(',').join('')));
              let number = parseInt(status.split(',').join(''))
              let adjusted = adjustIncome(number)
              return colorbyIncome(adjusted)

            })

            makeMapOpaque(duration);
      }

      const handleAccession = (stage) => {
        d3.selectAll('path')
            .attr('fill', (d) => accessionColorScheme(d, stage ))
      }


      const accessionColorScheme = (data, stage) => {

        let stateName = data.properties.admin
        if (!membership[stateName]) { return 'gray' }

        let year = parseInt(membership[stateName]['Year-joined']);
        if (!year) { return 'gray' }

        switch (stage) {
          case 'six': {
            if(year === 1957) {
              return '#FBB135'
            } else {
              return 'gray'
            }
          }
          case 'twelve': {
            if(year === 1957) {
              return '#f75413'
            } else if (year > 1957 && year <= 1992) {
              return '#FBB135'
            } else {
              return 'gray'
            }
          }
          case 'fifteen': {
            if(year <= 1992) {
              return '#f75413';
            } else if (year === 1995) {
              return '#FBB135'
            } else {
              return 'gray'
            }
          }
          case 'eastern': {
            if(year <= 1995) {
              return '#f75413';
            } else if (year === 2004) {
              return '#FBB135'
            } else {
              return 'gray'
            }
          }
          case 'now':{
            if(year <= 2004) {
              return '#f75413';
            } else if (year) {
              return '#FBB135'
            } else {
              return 'gray'
            }
          }
          case 'brexit':{
            if(stateName === 'United Kingdom') {
              return 'orange';
            } else if (year) {
              return '#f75413'
            } else {
              return 'gray'
            }
          }
          default:

        }

      }

      const showModal = function(data) {
        console.log('hover');
           var modal = document.getElementById('infoModal');
           modal.style.left = event.pageX +'px';
           modal.style.top = event.pageY + 'px';
           modal.innerHTML = data.properties.admin;
      };

      const hideModal = () => {

        var modal = document.getElementById('infoModal');
        modal.style = "height: 0px"
        modal.style.top = 'width: 0px'
        modal.innerHTML = '';
      }

      d3.json("region_un_Europe_subunits.json", function(error, data) {

         const countries = data.features

         map = svg.append('g').attr('class', 'boundary');

         europe = map.selectAll('path').data(countries) //must always be features regardless of what it says in json

        europe.enter()
          .append('path')
          .attr('d', path)
          .attr('stroke', 'white')
          .attr('stroke-width', 0.6)
          .attr('fill', (d) => colorify(d, 'EU'))
          .on('mouseover', (d) => showModal(d))
          .on('wheel', () => hideModal())



        europe.exit().remove();
      })

      //
      // let debtSection = false;
      //
      // window.addEventListener('scroll', function(e) {
      //
      //   let pos = window.scrollY;
      //   if (debtSection) {
      //
      //   }
      //
      // });




      const enter1 = new Waypoint({
        element: document.getElementById('trigger-first-section'),
        handler: function() {
          handleTransition('EU');
        },
        offset: '40%'
      })
      const reverseEnter1 = new Waypoint({
        element: document.getElementById('reverse-enter-section-1'),
        handler: function() {
          handleMapColorUpdate('EU');
        },
        offset: '50%'
      })

      const enter2 = new Waypoint({
        element: document.getElementById('enter-section-2'),
        handler: function() {
          handleAccession('six')
        },
        offset: '40%'
      })
      const reverseEnter2 = new Waypoint({
        element: document.getElementById('reverse-enter-section-2'),
        handler: function() {
          handleAccession('six')
        },
        offset: '50%'
      })

      const enter3 = new Waypoint({
        element: document.getElementById('enter-section-3'),
        handler: function() {
          handleAccession('twelve')
        },
        offset: '40%'
      })

      const reverseEnter3 = new Waypoint({
        element: document.getElementById('reverse-enter-section-3'),
        handler: function() {
          handleAccession('twelve')
        },
        offset: '50%'
      })

      const enter4 = new Waypoint({
        element: document.getElementById('enter-section-4'),
        handler: function() {
          handleAccession('fifteen')
        },
        offset: '40%'
      })
      const reverseEnter4 = new Waypoint({
        element: document.getElementById('reverse-enter-section-4'),
        handler: function() {
          handleAccession('fifteen')
        },
        offset: '50%'
      })


      const enter5 = new Waypoint({
        element: document.getElementById('enter-section-5'),
        handler: function() {
          handleAccession('eastern')
        },
        offset: '40%'
      })
      const reverseEnter5 = new Waypoint({
        element: document.getElementById('reverse-enter-section-5'),
        handler: function() {
          handleAccession('eastern')
        },
        offset: '50%'
      })

      const enter6 = new Waypoint({
        element: document.getElementById('enter-section-6'),
        handler: function() {
          handleAccession('now')
        },
        offset: '40%'
      })
      const reverseEnter6 = new Waypoint({
        element: document.getElementById('reverse-enter-section-6'),
        handler: function() {
          handleAccession('now')
        },
        offset: '50%'
      })
      const enter7 = new Waypoint({
        element: document.getElementById('enter-section-7'),
        handler: function() {
          handleAccession('brexit')
        },
        offset: '40%'
      })
      const reverseEnter7 = new Waypoint({
        element: document.getElementById('reverse-enter-section-7'),
        handler: function() {
          handleAccession('brexit')
        },
        offset: '50%'
      })
      const enter8 = new Waypoint({
        element: document.getElementById('enter-section-8'),
        handler: function() {
          handleTransition('Euro-relation');
        },
        offset: '40%'
      })
      const reverseEnter8 = new Waypoint({
        element: document.getElementById('reverse-enter-section-8'),
        handler: function() {
          handleMapColorUpdate('Euro-relation');
        },
        offset: '50%'
      })
      const enter9 = new Waypoint({
        element: document.getElementById('enter-section-9'),
        handler: function() {
          handleTransition('Schengen');
        },
        offset: '40%'
      })
      const reverseEnter9 = new Waypoint({
        element: document.getElementById('reverse-enter-section-9'),
        handler: function() {
          handleMapColorUpdate('Schengen');
        },
        offset: '50%'
      })
      const enter10 = new Waypoint({
        element: document.getElementById('enter-section-10'),
        handler: function() {
          handleTransition('EEA');
        },
        offset: '40%'
      })
      const reverseEnter10 = new Waypoint({
        element: document.getElementById('reverse-enter-section-10'),
        handler: function() {
          handleMapColorUpdate('EEA');
        },
        offset: '50%'
      })
      const enter11 = new Waypoint({
        element: document.getElementById('enter-section-11'),
        handler: function() {
          handleTransition('CurrencyUnion');
        },
        offset: '40%'
      })
      const reverseEnter11 = new Waypoint({
        element: document.getElementById('reverse-enter-section-11'),
        handler: function() {
          handleMapColorUpdate('CurrencyUnion');
        },
        offset: '50%'
      })
      const enter12 = new Waypoint({
        element: document.getElementById('enter-section-12'),
        handler: function() {
          handleTransition('income');
        },
        offset: '40%'
      })
      const reverseEnter12 = new Waypoint({
        element: document.getElementById('reverse-enter-section-12'),
        handler: function() {
          handleTransition('income')
        },
        offset: '50%'
      })


    </script>
  </body>
</html>
