<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Europe Explained</title>
  </head>
  <body>
    <div id="map"></div>
    <script src="http://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <script src="http://d3js.org/topojson.v3.min.js"></script>
    
    <p>hello world</p>
    
    <script>
    
      const height = 600;
      const width = 900;
      var projection = d3.geoMercator().center([ 15, 60 ]) 
								   .translate([ width/2, height/2 ]) 
								   .scale([ width/2.3 ]); 
      let europe = void 0;
      
      const path = d3.geoPath().projection(projection);
      
      const svg = d3.select('#map')
                    .append('svg')
                    .attr('height', height)
                    .attr('width', width)
      
      
      const membership = {};
    
      d3.csv("EuropeanStates.csv", function(data) {
        
        for (var i = 0; i < data.length; i++) {
          membership[i] = data[i]
        }
  
      });
      
    
      d3.json("region_un_Europe_subunits.json", function(error, data) {
         
         // const countries = topojson.feature(data.features)

         const countries = data.features
        console.log(countries);
         
         
         
         const map = svg.append('g')
         
         europe = map.selectAll('path').data(countries) //must always be features regardless of what it says in json
        
        
        
        // var color = d3.scaleLinear().domain([0,100]).range(['red', 'blue']);
        // 
        // const colorify = function(data) {
        //   let percent_democrats = countiesVotesIndex[parseInt(data.id)];
        //   if(!percent_democrats) return '#9b0061'
        //   return color(percent_democrats)
        // }
        // 
        europe.enter()
          .append('path')
          .attr('d', path)
          .attr('fill', 'gray')
          .attr('fill', '#eee');
        
        europe.exit().remove();
        
         
      })

      
    </script>
  </body>
</html>